@using vuuvv.web.Models.ViewModel;
@using vuuvv.web.Models;
@model IEnumerable<vuuvv.web.Models.WebPage>

@{
    Layout = "~/Views/Shared/AdminLayout.cshtml";
}
<div class="row-fluid">
	<div class="well">
		<ul class="nav nav-tabs">
			<li class="active">
				<a href="/manage/adminwebpage/">页面管理</a>
			</li>
			<li>
                @if (ViewBag.page != null)
                {
				<a href="/manage/adminwebpage/create/@ViewBag.page.Id">创建页面</a>
                }
                else
                {
				<a href="/manage/adminwebpage/create/">创建页面</a>
                }
			</li>
		</ul>
<form action="/manage/adminwebpage/delete" method="post">
		<div class="tab-content">
			<div class="tab-pane active in">
				<div class="well">
					<table class="table">
						<thead>
							<tr>
                                <th>删除</th>
                                <th>Id</th>
								<th>上级页面</th>
								<th>标题</th>
								<th>序号</th>
								<th>有效</th>
								<th>是否在导航栏</th>
                                <th></th>
							</tr>
						</thead>
						<tbody>
@foreach (var item in Model)
{
							<tr>
                                <td><input type="checkbox" value="@item.Id" id="id" name="ids"></td>
								<td>@Html.DisplayFor(modelItem => item.Id)</td>
								<td>@Html.DisplayFor(modelItem => item.Parent.Title)</td>
								<td><a href="/manage/adminwebpage/index/@item.Id">@Html.DisplayFor(modelitem => item.Title)</a></td>
								<td>@Html.DisplayFor(modelItem => item.Order)</td>
								<td>@Html.DisplayFor(modelItem => item.Active)</td>
								<td>@Html.DisplayFor(modelItem => item.InNavigation)</td>
								<td>
                                    @Html.ActionLink("编辑", "Edit", new { id = item.Id }) |
                                    @Html.ActionLink("增加子页面", "Create", new { id = item.Id }) |
                                    <a href="/manage/adminwebpage/Delete/@item.Id" onclick="return confirm('确定要删除吗？');">删除</a>
                                </td>
							</tr>
}
						</tbody>
					</table>
                    <div class="control-group">
                        <div class="controls">
                            <button type="submit" class="btn btn-primary">删除</button>
                            @if (ViewBag.page == null)
                            {
                            <a href="/manage/adminwebpage/" class="btn">上一级</a>
                            }
                            else
                            {
                            <a href="/manage/adminwebpage/index/@ViewBag.page.ParentId" class="btn">上一级</a>
                            }
                        </div>
                    </div>
                </div>
			</div>
		</div>
</form>
	</div>
</div>
