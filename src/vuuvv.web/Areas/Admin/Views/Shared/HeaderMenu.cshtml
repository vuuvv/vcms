@using Telerik.Web.Mvc;
@using Telerik.Web.Mvc.UI;

@{
    if (!SiteMapManager.SiteMaps.ContainsKey("admin")) {
        SiteMapManager.SiteMaps.Register<XmlSiteMap>("admin", sitemap =>
            sitemap.LoadFrom("~/Areas/Admin/sitemap.config"));
    } 
}
@{
    Html.Telerik().Menu().Name("Admin").BindTo("admin", (item, siteMapNode) =>
    {
        if (!string.IsNullOrWhiteSpace(item.ControllerName))
        {
            item.RouteValues = new RouteValueDictionary() {
                { "area", "Admin" }
            };
        }

        var imageUrl = siteMapNode.Attributes["ImageUrl"];
        if (imageUrl != null && !string.IsNullOrEmpty(imageUrl.ToString()))
        {
            item.ImageUrl = imageUrl.ToString();
        }

        if (ViewBag.SelectedMenuItem == item.Text)
        {
            item.Selected = true;
        }

    }).OpenOnClick(false).Render();
}